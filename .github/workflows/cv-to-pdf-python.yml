name: Convert Site to PDF (py)

on:
  push:
    branches:
      - trial

jobs:
  convert:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'

    - name: Install wkhtmltopdf
      run: sudo apt-get install wkhtmltopdf

    - name: Install PDFKit, emoji & markdown
      run: pip install pdfkit emoji markdown

    - name: Replace emojis and convert website to PDF
      run: python cv-to-pdf.py index.md

    - name: Check PDF file existence
      run: |
        if [ -f "butriman_cv.pdf" ]; then
          echo "PDF file exists."
        else
          echo "PDF file does not exist."
          exit 1 # Causes the workflow to fail if the PDF isn't found
        fi

    - name: Upload PDF
      uses: actions/upload-artifact@v2
      with:
        name: butriman_cv.pdf
        path: butriman_cv.pdf
