name: Convert Site to PDF (py)

on:
  push:
    branches:
      - trial

jobs:
  convert:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'

    - name: Install wkhtmltopdf
      run: sudo apt-get install wkhtmltopdf

    - name: Install PDFKit, emoji & markdown
      run: pip install pdfkit emoji markdown

    - name: Replace emojis and generate new MD file
      run: python cv-to-pdf.py index.md > updated_index.md

    - name: Convert website to PDF
      run: python -c "import pdfkit; pdfkit.from_file('updated_index.md', 'butriman_cv.pdf')"

    - name: Upload PDF
      uses: actions/upload-artifact@v2
      with:
        name: butriman_cv.pdf
        path: butriman_cv.pdf
